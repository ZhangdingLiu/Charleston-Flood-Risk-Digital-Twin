<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Flood Monitoring Dashboard - Layout Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: white;
            height: 100vh;
            overflow: hidden;
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #1a1a1a;
            border-bottom: 1px solid #2a2a2a;
            padding: 1rem 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .title-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .title {
            color: #22d3ee;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .subtitle {
            color: #9ca3af;
            font-size: 0.875rem;
        }
        
        .status-section {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-active { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-danger { background: #ef4444; }
        
        .main-content {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(12, 1fr);
            gap: 1rem;
            padding: 1rem;
            min-height: 0;
        }
        
        .panel {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .panel:hover {
            border-color: #22d3ee;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.1);
        }
        
        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .panel-title {
            color: #22d3ee;
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* Camera Feed Panel */
        .camera-panel {
            grid-column: span 5;
            grid-row: span 8;
        }
        
        .image-display {
            background: #0a0a0a;
            border: 1px solid #2a2a2a;
            border-radius: 0.5rem;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            position: relative;
        }
        
        .upload-area {
            text-align: center;
            color: #6b7280;
        }
        
        .controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .control-btn {
            background: #1e40af;
            border: none;
            border-radius: 0.5rem;
            color: white;
            padding: 0.5rem;
            cursor: pointer;
            transition: background 0.2s;
            min-width: 40px;
            height: 40px;
        }
        
        .control-btn:hover {
            background: #1d4ed8;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #3a3a3a;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #1e40af;
            width: 30%;
            transition: width 0.3s;
        }
        
        /* Dashboard Panel */
        .dashboard-panel {
            grid-column: span 7;
            grid-row: span 8;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .metric-card {
            background: rgba(42, 42, 42, 0.5);
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .metric-label {
            color: #9ca3af;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .metric-value {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .metric-confidence {
            color: #6b7280;
            font-size: 0.75rem;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            height: 200px;
        }
        
        .chart-container {
            background: rgba(42, 42, 42, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .chart-placeholder {
            background: #2a2a2a;
            height: 120px;
            border-radius: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        /* Timeline Panel */
        .timeline-panel {
            grid-column: span 12;
            grid-row: span 4;
        }
        
        .timeline-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            height: 100%;
        }
        
        .timeline-list {
            max-height: 200px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        .timeline-item {
            background: rgba(42, 42, 42, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .timeline-item:hover {
            background: rgba(42, 42, 42, 0.5);
            transform: translateX(4px);
        }
        
        .timeline-item.active {
            background: rgba(30, 64, 175, 0.2);
            border: 1px solid #1e40af;
            transform: translateX(8px);
        }
        
        .timeline-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .timeline-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .timeline-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            font-size: 0.875rem;
        }
        
        .analysis-details {
            background: rgba(42, 42, 42, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            height: fit-content;
        }
        
        /* Colors */
        .text-safe { color: #10b981; }
        .text-dangerous { color: #f59e0b; }
        .text-impassable { color: #ef4444; }
        .text-rising { color: #ef4444; }
        .text-falling { color: #10b981; }
        .text-stable { color: #22d3ee; }
        
        .bg-safe { background: #10b981; }
        .bg-dangerous { background: #f59e0b; }
        .bg-impassable { background: #ef4444; }
        
        /* Layout Editor Controls */
        .layout-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 0.5rem;
            padding: 1rem;
            z-index: 1000;
            min-width: 280px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .control-group {
            margin-bottom: 1rem;
        }
        
        .control-label {
            color: #9ca3af;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .control-input {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            color: white;
            border-radius: 0.25rem;
            padding: 0.5rem;
            width: 100%;
        }
        
        .control-button {
            background: #22d3ee;
            color: #0a0a0a;
            border: none;
            border-radius: 0.25rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            margin-top: 0.5rem;
            transition: background 0.2s;
        }
        
        .control-button:hover {
            background: #06b6d4;
        }
        
        .control-button.secondary {
            background: #374151;
            color: white;
        }
        
        .control-button.secondary:hover {
            background: #4b5563;
        }
        
        .panel-selector {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            color: white;
            border-radius: 0.25rem;
            padding: 0.5rem;
            width: 100%;
        }
        
        .selected-panel {
            border: 2px solid #22d3ee !important;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.3) !important;
        }
        
        .value-display {
            color: #22d3ee;
            font-size: 0.875rem;
            font-weight: 600;
            margin-top: 0.25rem;
        }
        
        .instructions {
            background: rgba(34, 211, 238, 0.1);
            border: 1px solid rgba(34, 211, 238, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }
        
        .feedback-area {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 0.25rem;
            padding: 0.5rem;
            width: 100%;
            height: 100px;
            resize: vertical;
            color: white;
            font-family: inherit;
            font-size: 0.875rem;
        }
        
        .toggle-controls {
            position: fixed;
            top: 20px;
            right: 320px;
            background: #22d3ee;
            color: #0a0a0a;
            border: none;
            border-radius: 0.25rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            z-index: 1001;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="title-section">
                    <h1 class="title">🌊 Urban Flood Monitoring System</h1>
                    <div class="subtitle">GPT-4 Vision AI Analysis - Layout Editor</div>
                </div>
                
                <div class="status-section">
                    <div class="status-item">
                        <div class="status-indicator status-active"></div>
                        <span>Backend</span>
                    </div>
                    <div class="status-item">
                        <div class="status-indicator status-active"></div>
                        <span>OpenAI</span>
                    </div>
                    <div class="status-item">
                        <div class="status-indicator status-active"></div>
                        <span>Healthy</span>
                    </div>
                    <div class="status-item">
                        <span>Last Update: 14:38:07</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Camera Feed Panel -->
            <div class="panel camera-panel" id="camera-panel" onclick="selectPanel('camera')">
                <div class="panel-header">
                    <h2 class="panel-title">📹 Live Camera Feed Simulation</h2>
                </div>
                
                <div class="image-display">
                    <div class="upload-area">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">📤</div>
                        <p style="margin-bottom: 0.5rem;">Upload Images for Analysis</p>
                        <p style="font-size: 0.875rem; color: #6b7280;">Drag & drop up to 50 images or click to browse</p>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="control-btn">⏮</button>
                    <button class="control-btn" style="padding: 0.75rem;">▶️</button>
                    <button class="control-btn">⏭</button>
                </div>
                
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; font-size: 0.875rem; color: #6b7280; margin-bottom: 0.5rem;">
                        <span>Frame 1 of 1</span>
                        <span>6-min intervals</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="control-btn" style="width: auto; padding: 0.5rem 1rem;">📤 Add More Images</button>
                </div>
            </div>

            <!-- Dashboard Panel -->
            <div class="panel dashboard-panel" id="dashboard-panel" onclick="selectPanel('dashboard')">
                <div class="panel-header">
                    <h2 class="panel-title">📊 Digital Twin Dashboard</h2>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <div class="status-indicator status-active"></div>
                        <span style="font-size: 0.875rem;">Healthy</span>
                    </div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">💧 Water Depth</div>
                        <div class="metric-value" style="color: #3b82f6;">15.2 cm</div>
                        <div class="metric-confidence">85% confidence</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">🚗 Passability</div>
                        <div class="metric-value text-dangerous">DANGEROUS</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">📈 Trend</div>
                        <div class="metric-value text-rising">Rising</div>
                        <div class="metric-confidence">2.1 cm/hour</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">👁️ River Level</div>
                        <div class="metric-value">1.2 m</div>
                        <div class="metric-confidence">92% confidence</div>
                    </div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3 style="color: #22d3ee; margin-bottom: 1rem; font-size: 1rem;">Water Depth Trend</h3>
                        <div class="chart-placeholder">📈 Line Chart</div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 style="color: #22d3ee; margin-bottom: 1rem; font-size: 1rem;">Passability Risk</h3>
                        <div class="chart-placeholder">📊 Area Chart</div>
                    </div>
                </div>
            </div>

            <!-- Timeline Panel -->
            <div class="panel timeline-panel" id="timeline-panel" onclick="selectPanel('timeline')">
                <div class="panel-header">
                    <h2 class="panel-title">🕒 Analysis Timeline</h2>
                    <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: #6b7280;">
                        <span>Total Analyses: 8</span>
                        <span>6-min intervals</span>
                    </div>
                </div>
                
                <div class="timeline-content">
                    <div>
                        <h3 style="color: #22d3ee; margin-bottom: 1rem; font-size: 1rem;">📅 Recent Activity</h3>
                        <div class="timeline-list">
                            <div class="timeline-item active" onclick="event.stopPropagation(); selectTimelineItem(this)">
                                <div class="timeline-header">
                                    <div class="timeline-status">
                                        <div class="status-indicator bg-dangerous"></div>
                                        <span>14:32:15</span>
                                    </div>
                                    <span style="color: #6b7280;">#8</span>
                                </div>
                                <div class="timeline-details">
                                    <div><span style="color: #6b7280;">Water:</span> <span style="color: #3b82f6;">15.2 cm</span></div>
                                    <div><span style="color: #6b7280;">Status:</span> <span class="text-dangerous">DANGEROUS</span></div>
                                    <div><span style="color: #6b7280;">Trend:</span> <span class="text-rising">Rising</span></div>
                                </div>
                            </div>
                            
                            <div class="timeline-item" onclick="event.stopPropagation(); selectTimelineItem(this)">
                                <div class="timeline-header">
                                    <div class="timeline-status">
                                        <div class="status-indicator bg-dangerous"></div>
                                        <span>14:26:12</span>
                                    </div>
                                    <span style="color: #6b7280;">#7</span>
                                </div>
                                <div class="timeline-details">
                                    <div><span style="color: #6b7280;">Water:</span> <span style="color: #3b82f6;">12.8 cm</span></div>
                                    <div><span style="color: #6b7280;">Status:</span> <span class="text-dangerous">DANGEROUS</span></div>
                                    <div><span style="color: #6b7280;">Trend:</span> <span class="text-rising">Rising</span></div>
                                </div>
                            </div>
                            
                            <div class="timeline-item" onclick="event.stopPropagation(); selectTimelineItem(this)">
                                <div class="timeline-header">
                                    <div class="timeline-status">
                                        <div class="status-indicator bg-safe"></div>
                                        <span>14:20:08</span>
                                    </div>
                                    <span style="color: #6b7280;">#6</span>
                                </div>
                                <div class="timeline-details">
                                    <div><span style="color: #6b7280;">Water:</span> <span style="color: #3b82f6;">8.1 cm</span></div>
                                    <div><span style="color: #6b7280;">Status:</span> <span class="text-safe">SAFE</span></div>
                                    <div><span style="color: #6b7280;">Trend:</span> <span class="text-stable">Stable</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analysis-details">
                        <h4 style="color: #22d3ee; margin-bottom: 1rem; font-size: 1rem;">📈 Current Analysis Details</h4>
                        <div style="font-size: 0.875rem;">
                            <div>
                                <span style="color: #6b7280;">Timestamp:</span>
                                <div style="font-family: monospace; color: white; font-size: 0.75rem; margin-top: 0.25rem;">
                                    2025-08-11 14:32:15
                                </div>
                            </div>
                            
                            <div style="margin-top: 1rem;">
                                <span style="color: #6b7280;">Reference Objects:</span>
                                <div style="display: flex; flex-wrap: wrap; gap: 0.25rem; margin-top: 0.5rem;">
                                    <span style="background: #2a2a2a; color: #22d3ee; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">car wheel</span>
                                    <span style="background: #2a2a2a; color: #22d3ee; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">curb stone</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toggle Button -->
    <button class="toggle-controls" onclick="toggleControls()">🎛️ Layout Editor</button>

    <!-- Layout Editor Controls -->
    <div class="layout-controls" id="layout-controls">
        <h3 style="color: #22d3ee; margin-bottom: 1rem;">📐 Layout Editor</h3>
        
        <div class="instructions">
            <strong>使用说明:</strong><br>
            1. 点击任意面板选中它（蓝色边框）<br>
            2. 调整宽度/高度滑块改变面板大小<br>
            3. 尝试预设布局方案<br>
            4. 在反馈区域告诉我您的需求
        </div>
        
        <div class="control-group">
            <label class="control-label">Selected Panel:</label>
            <select class="panel-selector" id="panel-selector" onchange="selectPanelFromDropdown()">
                <option value="">Select a panel...</option>
                <option value="camera">📹 Camera Feed</option>
                <option value="dashboard">📊 Dashboard</option>
                <option value="timeline">🕒 Timeline</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label">Panel Width (grid columns):</label>
            <input type="range" min="1" max="12" value="5" id="width-slider" class="control-input" onchange="updateLayout()">
            <div class="value-display" id="width-value">5/12 columns</div>
        </div>
        
        <div class="control-group">
            <label class="control-label">Panel Height (grid rows):</label>
            <input type="range" min="1" max="12" value="8" id="height-slider" class="control-input" onchange="updateLayout()">
            <div class="value-display" id="height-value">8/12 rows</div>
        </div>
        
        <div class="control-group">
            <label class="control-label">Layout Preset:</label>
            <select class="panel-selector" onchange="applyPreset(this.value)">
                <option value="">Current Layout</option>
                <option value="equal-thirds">⚖️ Equal Thirds</option>
                <option value="dashboard-focus">📊 Dashboard Focus</option>
                <option value="camera-focus">📹 Camera Focus</option>
                <option value="timeline-focus">🕒 Timeline Focus</option>
                <option value="vertical-split">↕️ Vertical Split</option>
                <option value="minimal-timeline">📏 Minimal Timeline</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label">您希望的布局修改:</label>
            <textarea class="feedback-area" id="feedback" placeholder="请在这里描述您想要的布局修改，比如：
- 希望Dashboard面板更大一些
- 想要添加新的功能区域
- 调整面板位置
- 其他布局需求..."></textarea>
        </div>
        
        <button class="control-button" onclick="exportLayout()">💾 Export Layout Config</button>
        <button class="control-button secondary" onclick="resetLayout()">🔄 Reset to Default</button>
        <button class="control-button" onclick="copyFeedback()">📋 Copy Feedback</button>
    </div>

    <script>
        let selectedPanel = '';
        let isControlsVisible = true;
        
        function toggleControls() {
            const controls = document.getElementById('layout-controls');
            isControlsVisible = !isControlsVisible;
            controls.style.display = isControlsVisible ? 'block' : 'none';
        }
        
        function selectPanel(panelType) {
            // Remove previous selection
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('selected-panel'));
            
            // Select new panel
            const panel = document.getElementById(panelType + '-panel');
            panel.classList.add('selected-panel');
            selectedPanel = panelType;
            
            // Update dropdown
            document.getElementById('panel-selector').value = panelType;
            
            // Update sliders based on current panel size
            updateSliders(panelType);
        }
        
        function selectPanelFromDropdown() {
            const value = document.getElementById('panel-selector').value;
            if (value) {
                selectPanel(value);
            }
        }
        
        function updateSliders(panelType) {
            let width, height;
            if (panelType === 'camera') {
                width = 5; height = 8;
            } else if (panelType === 'dashboard') {
                width = 7; height = 8;
            } else if (panelType === 'timeline') {
                width = 12; height = 4;
            }
            
            // Check current styles
            const panel = document.getElementById(panelType + '-panel');
            const currentWidth = panel.style.gridColumn?.match(/\d+/)?.[0];
            const currentHeight = panel.style.gridRow?.match(/\d+/)?.[0];
            
            width = currentWidth ? parseInt(currentWidth) : width;
            height = currentHeight ? parseInt(currentHeight) : height;
            
            document.getElementById('width-slider').value = width;
            document.getElementById('height-slider').value = height;
            document.getElementById('width-value').textContent = width + '/12 columns';
            document.getElementById('height-value').textContent = height + '/12 rows';
        }
        
        function updateLayout() {
            const width = document.getElementById('width-slider').value;
            const height = document.getElementById('height-slider').value;
            
            document.getElementById('width-value').textContent = width + '/12 columns';
            document.getElementById('height-value').textContent = height + '/12 rows';
            
            if (selectedPanel) {
                const panel = document.getElementById(selectedPanel + '-panel');
                panel.style.gridColumn = `span ${width}`;
                panel.style.gridRow = `span ${height}`;
            }
        }
        
        function applyPreset(preset) {
            const camera = document.getElementById('camera-panel');
            const dashboard = document.getElementById('dashboard-panel');
            const timeline = document.getElementById('timeline-panel');
            
            switch(preset) {
                case 'equal-thirds':
                    camera.style.gridColumn = 'span 4';
                    camera.style.gridRow = 'span 8';
                    dashboard.style.gridColumn = 'span 4';
                    dashboard.style.gridRow = 'span 8';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 4';
                    break;
                case 'dashboard-focus':
                    camera.style.gridColumn = 'span 3';
                    camera.style.gridRow = 'span 6';
                    dashboard.style.gridColumn = 'span 9';
                    dashboard.style.gridRow = 'span 8';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 4';
                    break;
                case 'camera-focus':
                    camera.style.gridColumn = 'span 8';
                    camera.style.gridRow = 'span 8';
                    dashboard.style.gridColumn = 'span 4';
                    dashboard.style.gridRow = 'span 8';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 4';
                    break;
                case 'timeline-focus':
                    camera.style.gridColumn = 'span 6';
                    camera.style.gridRow = 'span 6';
                    dashboard.style.gridColumn = 'span 6';
                    dashboard.style.gridRow = 'span 6';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 6';
                    break;
                case 'vertical-split':
                    camera.style.gridColumn = 'span 6';
                    camera.style.gridRow = 'span 8';
                    dashboard.style.gridColumn = 'span 6';
                    dashboard.style.gridRow = 'span 8';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 4';
                    break;
                case 'minimal-timeline':
                    camera.style.gridColumn = 'span 5';
                    camera.style.gridRow = 'span 10';
                    dashboard.style.gridColumn = 'span 7';
                    dashboard.style.gridRow = 'span 10';
                    timeline.style.gridColumn = 'span 12';
                    timeline.style.gridRow = 'span 2';
                    break;
            }
            
            if (selectedPanel) {
                updateSliders(selectedPanel);
            }
        }
        
        function resetLayout() {
            const camera = document.getElementById('camera-panel');
            const dashboard = document.getElementById('dashboard-panel');
            const timeline = document.getElementById('timeline-panel');
            
            camera.style.gridColumn = 'span 5';
            camera.style.gridRow = 'span 8';
            dashboard.style.gridColumn = 'span 7';
            dashboard.style.gridRow = 'span 8';
            timeline.style.gridColumn = 'span 12';
            timeline.style.gridRow = 'span 4';
            
            if (selectedPanel) {
                updateSliders(selectedPanel);
            }
        }
        
        function exportLayout() {
            const camera = document.getElementById('camera-panel');
            const dashboard = document.getElementById('dashboard-panel');
            const timeline = document.getElementById('timeline-panel');
            
            const layout = {
                camera: {
                    columns: parseInt(camera.style.gridColumn?.match(/\d+/)?.[0] || '5'),
                    rows: parseInt(camera.style.gridRow?.match(/\d+/)?.[0] || '8')
                },
                dashboard: {
                    columns: parseInt(dashboard.style.gridColumn?.match(/\d+/)?.[0] || '7'),
                    rows: parseInt(dashboard.style.gridRow?.match(/\d+/)?.[0] || '8')
                },
                timeline: {
                    columns: parseInt(timeline.style.gridColumn?.match(/\d+/)?.[0] || '12'),
                    rows: parseInt(timeline.style.gridRow?.match(/\d+/)?.[0] || '4')
                }
            };
            
            const feedback = document.getElementById('feedback').value;
            
            const output = `Layout Configuration:
${JSON.stringify(layout, null, 2)}

User Feedback:
${feedback}

请将这些信息发送给AI助手，告诉它您希望的布局修改！`;
            
            navigator.clipboard.writeText(output).then(() => {
                alert('布局配置已复制到剪贴板！您可以将其发送给AI助手进行代码修改。');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = output;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('布局配置已复制到剪贴板！');
            });
        }
        
        function copyFeedback() {
            const feedback = document.getElementById('feedback').value;
            if (!feedback.trim()) {
                alert('请先在反馈区域输入您的布局需求！');
                return;
            }
            
            navigator.clipboard.writeText(feedback).then(() => {
                alert('反馈内容已复制到剪贴板！');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = feedback;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('反馈内容已复制到剪贴板！');
            });
        }
        
        function selectTimelineItem(item) {
            document.querySelectorAll('.timeline-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
        }
        
        // Initial setup
        selectPanel('camera');
    </script>
</body>
</html>